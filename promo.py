import streamlit as st

# --- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ---
SECRET_CODEWORD = "–ê–Ω—è"
PERSON_NAME = "–ê–Ω—è"
PROMO_CODE = "7760 00305 32146 00000"

# --- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ---
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∏–∫–æ–Ω–∫—É –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
# page_title –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–≤—ã–º –≤—ã–∑–æ–≤–æ–º st –≤ —Å–∫—Ä–∏–ø—Ç–µ.
st.set_page_config(page_title="–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ –î–µ–Ω—å –†–æ–∂–¥–µ–Ω–∏—è", page_icon="üéâ")

# --- CSS –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ ---
# Streamlit –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å "—Å—ã—Ä–æ–π" CSS –¥–ª—è —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
# –ó–¥–µ—Å—å –º—ã –º–µ–Ω—è–µ–º —Å—Ç–∏–ª—å –∫–Ω–æ–ø–æ–∫ –∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–ª–æ–∫–∞, —á—Ç–æ–±—ã –æ–Ω–∏ –ª—É—á—à–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –∑–∞–¥–∞–Ω–∏—é.
st.markdown("""
<style>
    /* –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */
    .main .block-container {
        padding-top: 2rem;
        padding-bottom: 2rem;
    }
    /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
    .stButton > button {
        width: 100%; /* –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É –∫–æ–ª–æ–Ω–∫–∏ */
        border: 1px solid grey;
        border-radius: 8px; /* –°–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
        color: black;
        background-color: white;
        font-family: 'Calibri', sans-serif;
    }
    .stButton > button:hover {
        border-color: black;
        color: black;
        background-color: #f0f0f0; /* –õ–µ–≥–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }
</style>
""", unsafe_allow_html=True)


# --- –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ---

# –ò—Å–ø–æ–ª—å–∑—É–µ–º "—Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏" (session_state) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
# –æ —Ç–æ–º, –≤–æ—à–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–ª–∏ –Ω–µ—Ç. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç "–ø–æ–º–Ω–∏—Ç—å" —Å–æ—Å—Ç–æ—è–Ω–∏–µ
# –º–µ–∂–¥—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–∂–∞—Ç–∏—è–º–∏ –∫–Ω–æ–ø–æ–∫).
if 'authenticated' not in st.session_state:
    st.session_state.authenticated = False

# --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–æ–≤–æ–≥–æ —Å–ª–æ–≤–∞ ---
def check_codeword():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–≤–µ–¥–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –∏ –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ –≤–µ—Ä–Ω–æ–µ."""
    if st.session_state["codeword_input"] == SECRET_CODEWORD:
        st.session_state.authenticated = True
        # –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
        del st.session_state["codeword_input"]
    else:
        st.error("–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ –Ω–µ–≤–µ—Ä–Ω–æ")

# --- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü ---

# –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞.
if not st.session_state.authenticated:
    # –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —Å –ø–æ–º–æ—â—å—é –∫–æ–ª–æ–Ω–æ–∫
    col1, col2, col3 = st.columns([1, 2, 1])
    with col2:
        st.markdown(f"<h3 style='text-align: center; font-family: Calibri;'>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ.</h3>", unsafe_allow_html=True)
        
        # –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞. type="password" —Å–∫—Ä–æ–µ—Ç –≤–≤–æ–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã.
        # –ö–ª—é—á 'codeword_input' –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–Ω–∞—á–µ–Ω–∏—é –≤ st.session_state
        st.text_input(
            "–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ", 
            label_visibility="collapsed", 
            key="codeword_input", 
            type="password",
            on_change=check_codeword # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter
        )
        
        # –ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        st.button("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å", on_click=check_codeword)

# –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –≤–æ—à–µ–ª, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ø—Ä–æ–º–æ–∫–æ–¥–æ–º.
else:
    # "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π" —ç—Ñ—Ñ–µ–∫—Ç –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –æ—Ç Streamlit
    st.balloons()
    
    # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ–∑–¥—Ä–∞–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
    st.markdown(
        f"<h1 style='text-align: center; font-family: Calibri;'>{PERSON_NAME}, —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è!</h1>",
        unsafe_allow_html=True
    )
    st.markdown(
        "<p style='text-align: center; font-family: Calibri; font-size: 1.2em;'>–ü—Ä–∏–º–∏ –æ—Ç –Ω–∞—Å —ç—Ç–æ—Ç –ø–æ–¥–∞—Ä–æ–∫ :)</p>",
        unsafe_allow_html=True
    )
    
    st.markdown("---") # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
    
    st.markdown(
        "<h3 style='text-align: center; font-family: Calibri;'>–¢–≤–æ–π –ø—Ä–æ–º–æ–∫–æ–¥:</h3>",
        unsafe_allow_html=True
    )
    
    # –í—ã–≤–æ–¥–∏–º —Å–∞–º –ø—Ä–æ–º–æ–∫–æ–¥ –≤ —Ä–∞–º–∫–µ, —á—Ç–æ–±—ã –æ–Ω –≤—ã–¥–µ–ª—è–ª—Å—è
    st.code(PROMO_CODE, language=None)

